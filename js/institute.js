const institutesData = [
  // ================= KIDS =================
  {
    id: 1,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4,
    reviews: 5,
  },
  {
    id: 2,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 3,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 4,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 5,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 6,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 7,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 8,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= PRIMARY =================
  {
    id: 20,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 21,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 22,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 23,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 24,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 25,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 26,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "PRIMARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= SECONDARY =================
  {
    id: 40,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "SECONDARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 41,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "SECONDARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 42,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "SECONDARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 43,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "SECONDARY",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= COACHING =================
  {
    id: 60,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 61,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 62,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 63,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 64,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 65,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "COACHING",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= College =================
  {
    id: 70,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 71,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 72,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 73,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 74,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 75,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "College",
    image: "images/schools/1.png",
    rating: 4.8,
    reviews: 10,
  },
];
// 2️⃣ DOM SELECTORS
const grid = document.getElementById("instituteGrid");
const pills = document.querySelectorAll(".pill[data-category]");

// 3️⃣ HELPER FUNCTIONS
function normalizeCategory(cat) {
  return cat.toLowerCase();
}

function categoryLabel(cat) {
  const map = {
    kids: "Kids School",
    primary: "Primary School",
    secondary: "Secondary School",
    college: "College",
    coaching: "Coaching Classes",
  };
  return map[cat] || cat;
}

function generateStars(rating) {
  const fullStars = Math.floor(rating);
  const hasHalf = rating % 1 >= 0.5;
  let starsHTML = "";

  for (let i = 0; i < 5; i++) {
    if (i < fullStars) {
      starsHTML += `<i class="fa fa-star"></i>`;
    } else if (i === fullStars && hasHalf) {
      starsHTML += `<i class="fa fa-star-half-alt"></i>`;
    } else {
      starsHTML += `<i class="fa fa-star-o"></i>`;
    }
  }

  return starsHTML;
}

// 4️⃣ MAIN RENDER FUNCTION
function renderCards(category) {
  if (!grid) return;

  grid.innerHTML = "";

  const filtered = institutesData.filter(
    (item) => normalizeCategory(item.category) === category,
  );

  filtered.forEach((item) => {
    const card = document.createElement("a");
    card.className = "institute-card";
    card.href = `detailsinstitute.html?id=${item.id}`;

    card.innerHTML = `
      <img src="${item.image}" alt="${item.name}">
      <div class="card-body">

        <div class="card-top-row">
          <div class="rating">
            ${generateStars(item.rating)}
          </div>

          <div class="reviews">
            <i class="fa fa-user"></i> ${item.reviews}
          </div>
        </div>

        <h3>${item.name}</h3>

        <p class="location">
          ${item.address}, ${item.city}
        </p>
     <p class="location">
          ${item.state}
        </p>
 
  
        <p class="tag">${categoryLabel(normalizeCategory(item.category))}</p>
      </div>
    `;

    grid.appendChild(card);
  });
}

// 5️⃣ INITIAL LOAD
renderCards("kids");

// 6️⃣ TAB CLICK LOGIC
pills.forEach((btn) => {
  btn.addEventListener("click", () => {
    pills.forEach((p) => p.classList.remove("active"));
    btn.classList.add("active");

    const category = btn.getAttribute("data-category");
    renderCards(category);
  });
});
