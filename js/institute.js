const institutesData = [
  // ================= KIDS =================
  {
    id: 1,
    name: "Kidzee Duliajan",
    city: "Duliajan",
    state: "Assam",
    address: "Christian Basti Near Duliajan",
    category: "kids",
    image: "../images/kedzee.png",
    rating: 4,
    reviews: 5,
  },
  {
    id: 2,
    name: "Podar Jumbo Kids",
    city: "Nagpur",
    state: "Maharashtra",
    address: "Parsodi",
    category: "kids",
    image: "../images/podar.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 3,
    name: "Euro Kids",
    city: " Nagpur",
    state: "Maharashtra",
    address: "Abhyankar Nagar",
    category: "kids",
    image: "../images/euro.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 4,
    name: "Safari Kid ",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Malad",
    category: "kids",
    image: "../images/safari.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 5,
    name: "Sanskruti School",
    city: "Pune",
    state: "Maharashtra",
    address: "Wakad",
    category: "kids",
    image: "../images/sanskruti.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 6,
    name: "SMARTKIDZ",
    city: "Pune",
    state: "Maharashtra",
    address: "Wakad",
    category: "kids",
    image: "../images/smartkdz.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 7,
    name: "Minal kids world",
    city: "",
    state: "Tamil Nadu",
    address: "Villapuram",
    category: "kids",
    image: "../images/kids7.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 8,
    name: "Oruga World",
    city: "Pune",
    state: "Maharashtra",
    address: "Baner",
    category: "kids",
    image: "../images/kids8.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= PRIMARY =================
  {
    id: 20,
    name: "Yashoda High School",
    city: "Nagpur",
    state: "Maharashtra",
    address: "Trimurti Nagar",
    category: "PRIMARY",
    image: "../images/primary1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 21,
    name: "Centre Point",
    city: " Nagpur",
    state: "Maharashtra",
    address: "Seminary Hills",
    category: "PRIMARY",
    image: "../images/primary2.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 22,
    name: "VIBGYOR Rise",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Malad West",
    category: "PRIMARY",
    image: "../images/primary3.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 23,
    name: "Dr. Kalmadi Shamarao",
    city: "Pune",
    state: "Maharashtra",
    address: "Baner",
    category: "PRIMARY",
    image: "../images/primary4.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 24,
    name: "St. Joseph Matriculation",
    city: "Madurai",
    state: "Tamil Nadu",
    address: "Koodal Nagar",
    category: "PRIMARY",
    image: "../images/primary5.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 25,
    name: "Chhabildas School",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Dadar",
    category: "PRIMARY",
    image: "../images/primary.6.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 26,
    name: "Minal kids world",
    city: "Hyderabad",
    state: "Telangana",
    address: "Kukatpally",
    category: "PRIMARY",
    image: "../images/primary7.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 26,
    name: "EuroSchool",
    city: "Hyderabad",
    state: "Telangana",
    address: "Kukatpally",
    category: "PRIMARY",
    image: "../images/primary8.png",
    rating: 4.8,
    reviews: 10,
  },

  // ================= SECONDARY =================
  {
    id: 40,
    name: "Mount Carmel School",
    city: "Duliajan,",
    state: "Assam",
    address: "Christian Basti Near",
    category: "SECONDARY",
    image: "../images/secondery1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 41,
    name: "Kidzee Duliajan",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Malad West, ",
    category: "SECONDARY",
    image: "../images/secondery2.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 42,
    name: "Global Indian",
    city: "Pune",
    state: "Maharashtra",
    address: "Mahalunge",
    category: "SECONDARY",
    image: "../images/secondery3.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 43,
    name: "St. Bede's Anglo",
    city: "Chennai",
    state: "Tamil Nadu",
    address: "Santhome",
    category: "SECONDARY",
    image: "../images/secondery4.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 44,
    name: "Somalwar High School",
    city: "Nagpur",
    state: " Maharashtra",
    address: "Shastri Layout, Khamla",
    category: "SECONDARY",
    image: "../images/secondery5.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 45,
    name: "SMARTKIDZ",
    city: "Nagpur",
    state: "Maharashtra ",
    address: "Samarth Nagar East",
    category: "SECONDARY",
    image: "../images/secondery6.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 46,
    name: "St.Michael Matriculation",
    city: "",
    state: "Tamil Nadu",
    address: "Melapanangadi",
    category: "SECONDARY",
    image: "../images/secondery7.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 47,
    name: "Kamal Pratishthan Mount Litera",
    city: "Pune",
    state: "Maharashtra ",
    address: "Wakad",
    category: "SECONDARY",
    image: "../images/secondery8.png",
    rating: 4.8,
    reviews: 10,
  },
 
 



  // ================= College =================
  {
    id: 70,
    name: "Itvedant ",
    city: "Pune",
    state: "Maharashtra",
    address: "Shivajinagar",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 71,
    name: "SevenMentor",
    city: " Pune",
    state: "Maharashtra",
    address: "Shivajinagar",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 72,
    name: "QMS Academy ",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Worli",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 73,
    name: "Digital Skills",
    city: " Pune",
    state: "Maharashtra",
    address: "Viman Nagar",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 74,
    name: "German Academy",
    city: "Pune",
    state: "Maharashtra",
    address: "Shukrawar Peth",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 75,
    name: "Aarnell Education",
    city: "Pune",
    state: "Maharashtra",
    address: "Gultekadi",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 76,
    name: "Study Metro",
    city: "Pune",
    state: "Maharashtra",
    address: "Deccan Gymkhana",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 77,
    name: "St Johns Cricket Academy",
    city: "",
    state: "Telangana",
    address: "Secunderabad",
    category: "College",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },




  // ================= COACHING =================
  {
    id: 60,
    name: "Itvedant ",
    city: "Pune",
    state: "Maharashtra",
    address: "Shivajinagar",
    category: "COACHING",
    image: "../images/coaching1.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 61,
    name: "SevenMentor",
    city: "Pune",
    state: "Maharashtra",
    address: "Shivajinagar",
    category: "COACHING",
    image: "../images/coaching2.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 62,
    name: "QMS Academy",
    city: "Mumbai",
    state: "Maharashtra",
    address: "Worli",
    category: "COACHING",
    image: "../images/coaching3.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 63,
    name: "Digital Skills",
    city: "Pune",
    state: "Maharashtra",
    address: "Viman Nagar",
    category: "COACHING",
    image: "../images/coaching4.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 64,
    name: "German Academy",
    city: "Pune",
    state: "Maharashtra",
    address: "Shukrawar Peth",
    category: "COACHING",
    image: "../images/coaching5.png",
    rating: 4.8,
    reviews: 10,
  },
  {
    id: 65,
    name: "Aarnell Education",
    city: "Pune",
    state: "Maharashtra",
    address: "Gultekadi",
    category: "COACHING",
    image: "../images/coaching6.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 66,
    name: "Study Metro",
    city: "Pune",
    state: "Maharashtra",
    address: "Deccan Gymkhana",
    category: "COACHING",
    image: "../images/coaching7.png",
    rating: 4.8,
    reviews: 10,
  },
   {
    id: 67,
    name: "St Johns Cricket Academy",
    city: "",
    state: "Telangana",
    address: "Secunderabad",
    category: "COACHING",
    image: "../images/coaching8.png",
    rating: 4.8,
    reviews: 10,
  },


 
];
// 2️⃣ DOM SELECTORS
const grid = document.getElementById("instituteGrid");
const pills = document.querySelectorAll(".pill[data-category]");

// 3️⃣ HELPER FUNCTIONS
function normalizeCategory(cat) {
  return cat.toLowerCase();
}

function categoryLabel(cat) {
  const map = {
    kids: "Kids School",
    primary: "Primary School",
    secondary: "Secondary School",
    college: "College",
    coaching: "Coaching Classes",
  };
  return map[cat] || cat;
}

function generateStars(rating) {
  const fullStars = Math.floor(rating);
  const hasHalf = rating % 1 >= 0.5;
  let starsHTML = "";

  for (let i = 0; i < 5; i++) {
    if (i < fullStars) {
      starsHTML += `<i class="fa fa-star"></i>`;
    } else if (i === fullStars && hasHalf) {
      starsHTML += `<i class="fa fa-star-half-alt"></i>`;
    } else {
      starsHTML += `<i class="fa fa-star-o"></i>`;
    }
  }

  return starsHTML;
}

// 4️⃣ MAIN RENDER FUNCTION
function renderCards(category) {
  if (!grid) return;

  grid.innerHTML = "";

  const filtered = institutesData.filter(
    (item) => normalizeCategory(item.category) === category,
  );

  filtered.forEach((item) => {
    const card = document.createElement("a");
    card.className = "institute-card";
    card.href = `detailsinstitute.html?id=${item.id}`;

    card.innerHTML = `
      <img src="${item.image}" alt="${item.name}">
      <div class="card-body">

        <div class="card-top-row">
          <div class="rating">
            ${generateStars(item.rating)}
          </div>

          <div class="reviews">
            <i class="fa fa-user"></i> ${item.reviews}
          </div>
        </div>

        <h3>${item.name}</h3>

        <p class="location">
          ${item.address}, ${item.city}
        </p>
     <p class="location">
          ${item.state}
        </p>
 
  
        <p class="tag">${categoryLabel(normalizeCategory(item.category))}</p>
      </div>
    `;

    grid.appendChild(card);
  });
}

// 5️⃣ INITIAL LOAD
function getCategoryFromURL() {
  const params = new URLSearchParams(window.location.search);
  return params.get("category") || "kids"; // default if nothing selected
}

const activeCategory = getCategoryFromURL();
renderCards(activeCategory);

// Highlight correct tab button
pills.forEach(btn => {
  if (btn.dataset.category === activeCategory) {
    btn.classList.add("active");
  } else {
    btn.classList.remove("active");
  }
});


// 6️⃣ TAB CLICK LOGIC
pills.forEach((btn) => {
  btn.addEventListener("click", () => {
    pills.forEach((p) => p.classList.remove("active"));
    btn.classList.add("active");

    const category = btn.getAttribute("data-category");
    renderCards(category);
  });
});





document.addEventListener("DOMContentLoaded", function () {
  const instituteGrid = document.getElementById("instituteGrid");

  instituteGrid.addEventListener("click", function (e) {
    const card = e.target.closest(".institute-card");
    if (card) {
      window.location.href = "../html/detailsinstitute.html";
    }
  });
}); 




